# CTRAMP Output Files

TM2 produces the following tour and trip microsimulation trip lists for both individual and joint travel. The files output are listed below. The modes are defined in [Tour and Trip Modes](#tour-and-trip-modes-codes) below.

**Important Note**: It is important to consider occupancy when reviewing these tables. The model generates person trips. A mode is chosen for each person trip, for personal vehicle travel this could be SOV, HOV2, or HOV3+. At an aggregate level, 100 HOV2 person trips must result in 50 vehicle trips. While this is true at an aggregate level, it may not be possible to pair up all HOV2 person trips produced in the model. But the model produces enough HOV2 person trips to match the target mode share. When reviewing the joint table remember that these records include all travelers. So only one row per trip, as opposed to one row per person or traveler.

## Main Output Files

- Accessibilities - `ctramp_output/accessibilities.csv`
- PreAutoOwnership - `ctramp_output/aoResults_pre.csv`
- AutoOwnership - `ctramp_output/aoResults.csv`
- Household Data - `ctramp_output/householdData_[iteration].csv`
- Person Data - `ctramp_output/personData_[iteration].csv`
- Work and School Location Choice - `ctramp_output/wsLocResults_[iteration].csv`
- Shadow Pricing - `ctramp_output/ShadowPricingOutput_[work/school]_0.csv`
- Individual Tours - `ctramp_output/indivTourData_[iteration].csv`
- Individual Trips - `ctramp_output/indivTripData_[iteration].csv`
- Joint Tours â€“ `ctramp_output/jointTourData_[iteration].csv`
- Joint Trips - `ctramp_output/jointTripData_[iteration].csv`
- Resimulated Transit Trips - `ctramp_output/indivTripDataResim_[iteration]_[inner_iteration].csv`
- Unconstrained Parking Demand - `ctramp_output/unconstrainedPNRDemand_[iteration]0.csv`
- Constrained Parking Demand - `ctramp_output/constrainedPNRDemand_[iteration]1.csv`

## Core Output Files

### Individual Tours File (`indivTourData_[iteration].csv`)

Contains detailed information about individual (non-joint) tours generated by the model. Tours represent round-trip travel from home to a primary destination and back.

**Key Fields:**

| Field | Description |
|-------|-------------|
| `hh_id` | Household ID |
| `person_id` | Person ID |
| `person_num` | Person number in household |
| `person_type` | Person type classification |
| `tour_id` | Unique tour identifier |
| `tour_category` | Tour category: `INDIVIDUAL_NON_MANDATORY`, `MANDATORY`, `AT_WORK` |
| `tour_purpose` | Tour purpose: `Work`, `School`, `University`, `Shop`, `Maintenance`, `Eating Out`, `Visiting`, `Discretionary`, `Escort`, `Work-Based` |
| `orig_mgra` | Origin MAZ (Micro Analysis Zone) |
| `dest_mgra` | Destination MAZ |
| `start_period` | Tour start period (30-min periods from 3:00 AM, see Time Period Codes) |
| `end_period` | Tour end period (30-min periods from 3:00 AM, see Time Period Codes) |
| `tour_mode` | Tour mode (see Tour and Trip Mode Codes) |
| `tour_distance` | Tour distance in miles |
| `tour_time` | Tour time in minutes |
| `atWork_freq` | At-work stop frequency |
| `num_ob_stops` | Number of outbound stops |
| `num_ib_stops` | Number of inbound stops |
| `out_btap` | Outbound boarding TAP (Transit Access Point) |
| `out_atap` | Outbound alighting TAP |
| `in_btap` | Inbound boarding TAP |
| `in_atap` | Inbound alighting TAP |
| `out_set` | Outbound transit set |
| `in_set` | Inbound transit set |
| `sampleRate` | Iteration sample rate |
| `dcLogsum` | Destination choice logsum |
| `util_[1-17]` | Utility for each tour mode |
| `prob_[1-17]` | Probabilities for each tour mode |

### Individual Trips File (`indivTripData_[iteration].csv`)

Detailed trip-level information for individual travel. Trips are the building blocks of tours, including intermediate stops.

**Key Fields:**

- All tour-level identification fields (`hh_id`, `person_id`, `tour_id`)
- `trip_id`: Unique trip identifier
- `stop_id`: Stop sequence number within tour
- `inbound`: Direction indicator (0=outbound, 1=inbound)
- `trip_purpose`: Specific trip purpose
- `orig_purpose`: Origin activity purpose
- `dest_purpose`: Destination activity purpose
- `orig_mgra`, `dest_mgra`: Origin/destination MAZ
- `trip_mode`: Transportation mode for this trip
- `trip_period`: Trip departure time period
- `trip_distance`: Trip distance in miles
- `trip_time`: Trip time in minutes
- `parking_mgra`: Parking location MAZ (for auto modes)

### Joint Tour Data (`jointTourData_[iteration].csv`)

Contains information about joint household tours where multiple household members travel together. Uses similar structure to individual tours but represents the entire travel party.

**Special Considerations:**

- One record represents the entire travel group
- All participating household members are identified
- Represents coordinated household travel decisions
- Important for understanding family travel patterns

### Joint Trip Data (`jointTripData_[iteration].csv`)

Trip-level data for joint household travel. **Important**: These records include all travelers in the travel party, so there is only one row per trip (not per person), unlike individual trip files.

## Household and Person Model Results

### Household Data (`householdData_[iteration].csv`)

Comprehensive household-level model results capturing key household characteristics and choice model outcomes.

**Key Model Results:**

- `hh_id`: Household identifier
- `home_mgra`: Home location MAZ
- `income`: Household income category
- `hhsize`: Household size
- `workers`: Number of workers
- `autos`: Number of household vehicles
- `age_of_head`: Age of household head
- `transponder`: Transponder ownership model result
- `cdap_pattern`: Coordinated Daily Activity Pattern (CDAP) model result
- `jtf_choice`: Joint tour frequency model result

**CDAP Patterns**: Represent coordinated daily activity patterns for all household members:

- M: Mandatory activity (work/school)
- N: Non-mandatory activity only
- H: Home-based (no out-of-home activity)

### Person Data (`personData_[iteration].csv`)

Person-level model outputs capturing individual characteristics and choice outcomes.

**Key Model Results:**

- `hh_id`, `person_id`: Household and person identifiers
- `person_num`: Person number within household
- `age`: Person age
- `gender`: Person gender
- `type`: Person type (worker, student, etc.)
- `value_of_time`: Individual value of time ($/hour)
- `transitSubsidy_choice`: Transit subsidy usage choice (0/1)
- `transitSubsidy_percent`: Transit subsidy discount percentage
- `transitPass_choice`: Transit pass usage choice (0/1)
- `preTelecommuteCdap`: Individual CDAP results before considering telecommuting
- `telecommute`: Telecommute choice (-1: non-workers, 1: Does not telecommute, 2: Telecommutes) 
- `cdap`: Individual CDAP result (M/N/H)
- `imf_choice`: Individual mandatory tour frequency choice
- `inmf_choice`: Individual non-mandatory tour frequency choice
- `fp_choice`: Free parking availability choice
- `reimb_pct`: Parking reimbursement percentage
- `workDCLogsum`: Work destination choice logsum
- `schoolDCLogsum`: School destination choice logsum

## Accessibility and Location Choice Results

### Accessibilities (`accessibilities.csv`)

Comprehensive accessibility measures by micro-zone including:
- Employment accessibility by industry sector
- Population accessibility by demographic group
- Transportation system accessibility measures
- Relative accessibility compared to regional average

### Auto Ownership Results

**Two-Stage Process:**

- **Pre-Location Choice**: `aoResults_pre.csv` - Auto ownership before work/school location choice
- **Post-Location Choice**: `aoResults.csv` - Final auto ownership after location choice adjustments

**Key Fields:**

- Household ID and characteristics
- Auto ownership level (0, 1, 2, 3+ vehicles)
- Ownership probabilities
- Utility values for each ownership level

### Work and School Location Choice (`wsLocResults_[iteration].csv`)

Detailed results from the work and school location choice models.

**Employment Categories:**

- 1: Employed full-time
- 2: Employed part-time  
- 3: Not employed
- 4: Under age 16

**Student Categories:**

- 1: Student in grade or high school
- 2: Student in college or higher
- 3: Not a student

**Work Segments:**

- -1: Not a worker
- 0: Management, business, science, and arts
- 1: White collar (office and administrative)
- 2: Blue collar (natural resources, construction, maintenance)
- 3: Sales and related occupations
- 4: Natural resources, construction, and maintenance
- 5: Production, transportation, and material moving
- 99999: Works from home

**School Segments:**

- -1: Non-student
- 0: Pre-schooler
- 1-8: Elementary/middle school districts
- 9-16: High school districts
- 17-18: University students (typical and non-typical)
- 88888: Home-schooled

**Location Results:**

- `WorkLocation`: Work location MAZ
- `WorkLocationDistance`: Distance to work (miles)
- `WorkLocationLogsum`: Work location choice logsum
- `SchoolLocation`: School location MAZ  
- `SchoolLocationDistance`: Distance to school (miles)
- `SchoolLocationLogsum`: School location choice logsum

### Shadow Pricing Results (`ShadowPricingOutput_[work/school]_0.csv`)
Shadow price adjustments by microzone and market segment to ensure model convergence between trip productions and attractions.

## Transit-Specific Outputs

### Resimulated Transit Trips (`indivTripDataResim_[iteration]_[inner_iteration].csv`)
Transit trips that have been resimulated for capacity constraint modeling and crowding effects.

**Purpose:**

- Account for transit vehicle capacity constraints
- Incorporate crowding and comfort effects
- Update path choices based on congested transit conditions
- Model passenger loading and transit reliability

**Additional Fields:**

- Transit access and egress information
- Capacity utilization indicators
- Crowding penalty factors
- Alternative route information

### Park & Ride Demand Files

**Unconstrained PNR Demand** (`unconstrainedPNRDemand_[iteration]0.csv`)

- Park-and-ride demand without parking capacity constraints
- Shows latent demand for P&R facilities

**Constrained PNR Demand** (`constrainedPNRDemand_[iteration]1.csv`)

- Park-and-ride demand after applying parking capacity limits
- Shows actual utilization given supply constraints
- Fields include TAP ID, time period, demand, capacity, utilization rate

## Mode and Time Period Reference

### Tour and Trip Mode Codes

| Code | Mode | Description |
|------|------|-------------|
| 1 | DRIVEALONEFREE | Drive alone, non-toll |
| 2 | DRIVEALONEPAY | Drive alone, toll |
| 3 | SHARED2GP | Shared ride 2 person, general purpose lanes (non-toll)|
| 4 | SHARED2HOV | Shared ride 2 person, HOV-eligible (non-toll) |
| 5 | SHARED2PAY | Shared ride 2 person, toll (HOV and toll eligible) |
| 6 | SHARED3GP | Shared ride 3+ person, general purpose lanes (non-toll)|
| 7 | SHARED3HOV | Shared ride 3+ person, HOV-eligible (non-toll) |
| 8 | SHARED3PAY | Shared ride 3+ person, toll (HOV and toll eligible) |
| 9 | WALK | Walk |
| 10 | BIKE | Bicycle |
| 11 | WALK_SET | Walk to transit |
| 12 | PNR_SET | Drive to transit (Park & Ride) |
| 13 | KNR_PERS | Kiss & Ride (personal vehicle drop-off to transit) |
| 14 | KNR_TNC | Kiss & Ride (TNC drop-off to transit) |
| 15 | TAXI | Taxi |
| 16 | TNC | Transportation Network Company (Uber/Lyft) |

### Time Period Codes

CT-RAMP uses 40 time periods of 30 minutes each, starting at 3:00 AM:

| Period | Time Range | Period | Time Range |
|--------|------------|--------|------------|
| 1 | 03:00-05:00 AM | 21 | 02:30-03:00 PM |
| 2 | 05:00-05:30 AM | 22 | 03:00-03:30 PM |
| 3 | 05:30-06:00 AM | 23 | 03:30-04:00 PM |
| 4 | 06:00-06:30 AM | 24 | 04:00-04:30 PM |
| 5 | 06:30-07:00 AM | 25 | 04:30-05:00 PM |
| 6 | 07:00-07:30 AM | 26 | 05:00-05:30 PM |
| 7 | 07:30-08:00 AM | 27 | 05:30-06:00 PM |
| 8 | 08:00-08:30 AM | 28 | 06:00-06:30 PM |
| 9 | 08:30-09:00 AM | 29 | 06:30-07:00 PM |
| 10 | 09:00-09:30 AM | 30 | 07:00-07:30 PM |
| 11 | 09:30-10:00 AM | 31 | 07:30-08:00 PM |
| 12 | 10:00-10:30 AM | 32 | 08:00-08:30 PM |
| 13 | 10:30-11:00 AM | 33 | 08:30-09:00 PM |
| 14 | 11:00-11:30 AM | 34 | 09:00-09:30 PM |
| 15 | 11:30-12:00 PM | 35 | 09:30-10:00 PM |
| 16 | 12:00-12:30 PM | 36 | 10:00-10:30 PM |
| 17 | 12:30-01:00 PM | 37 | 10:30-11:00 PM |
| 18 | 01:00-01:30 PM | 38 | 11:00-11:30 PM |
| 19 | 01:30-02:00 PM | 39 | 11:30-12:00 AM |
| 20 | 02:00-02:30 PM | 40 | 12:00-03:00 AM |

**Five-Period Aggregation:**

- **EA (Early AM)**: Periods 1-4 (3:00-6:00 AM)
- **AM (AM Peak)**: Periods 5-10 (6:00-9:00 AM)  
- **MD (Midday)**: Periods 11-22 (9:00 AM-3:00 PM)
- **PM (PM Peak)**: Periods 23-28 (3:00-6:30 PM)
- **EV (Evening)**: Periods 29-40 (6:30 PM-3:00 AM)

### Tour Purpose Hierarchy

**Mandatory Tours** (highest priority):

- `Work`: Work-based tours
- `School`: K-12 school tours
- `University`: Higher education tours

**Non-Mandatory Tours**:

- `Escort`: Escorting other household members
- `Shop`: Shopping and errands
- `Maintenance`: Personal business, medical, etc.
- `Eating Out`: Restaurant meals
- `Visiting`: Social/recreational visits
- `Discretionary`: Other discretionary activities

**At-Work Tours**:

- `Work-Based`: Tours originating from workplace during work hours

### Trip Destination Purposes

The following destination purposes are found in the individual trip files (`dest_purpose` field), showing the activity at trip destinations:

| Purpose | Description | Typical Share |
|---------|-------------|---------------|
| `Home` | Return to home location | ~33% |
| `Maintenance` | Personal business, medical appointments, banking, etc. | ~11% |
| `Escort` | Dropping off/picking up household members | ~10% |
| `Work` | Primary work location | ~10% |
| `Shop` | Shopping for goods and services | ~9% |
| `Discretionary` | Recreation, entertainment, personal activities | ~7% |
| `School` | K-12 educational activities | ~5% |
| `Eating Out` | Restaurant meals and food services | ~5% |
| `Visiting` | Social visits, family/friend gatherings | ~5% |
| `Work-Based` | Work-related activities during work hours | ~1% |
| `University` | Higher education activities | ~1% |
| `work related` | Other work-related activities | <1% |

**Notes:**

- Home is the most common destination as most tours are round-trips
- Personal activities (Maintenance, Shop, Discretionary, Eating Out) represent major trip attractors
- Work-related destinations include both primary work locations and work-based activities
- Escort trips reflect household coordination and dependency relationships
- Percentages are approximate and vary by scenario and geographic area

## Model Integration and Validation

### Quality Control Fields

**Logsum Values**: 

- Destination choice logsums measure accessibility
- Mode choice logsums measure level-of-service
- Higher values indicate better options/accessibility

**Utility and Probability Values**:

- `util_[1-17]`: Raw utility values for each mode alternative
- `prob_[1-17]`: Choice probabilities (should sum to 1.0)
- Used for model validation and sensitivity analysis

**Sample Rate Fields**:

- Different sampling rates used across model iterations
- Early iterations may use 10-50% samples for computational efficiency
- Final iteration typically uses 100% sample

### Distance and Time Consistency

Output files include multiple distance/time calculations for validation:

- **Tour-level**: Aggregated metrics for entire tours
- **Trip-level**: Detailed measurements for individual trip segments
- **Skim-based**: Values from network level-of-service matrices
- **Modeled**: Values from actual path assignments

### Data Quality Checks

**Required Validations**:

1. **Population Consistency**: Person/household counts match synthetic population
2. **Trip Rate Validation**: Compare against observed survey data
3. **Mode Share Accuracy**: Validate against census and local survey benchmarks
4. **Temporal Distribution**: Verify peak spreading and time-of-day patterns
5. **Spatial Patterns**: Check geographic trip distribution and length
6. **Occupancy Ratios**: Verify shared ride occupancy factors
7. **Transit Ridership**: Compare against transit operator data

## File Naming and Management

### Naming Conventions

- `[iteration]`: Model global iteration number (typically 1-4)
- `[inner_iteration]`: Inner feedback iteration for capacity constraints
- `_pre`: Files created before work/school location choice
- `_0`: Indicates base scenario or initial iteration

### File Management

- **Backup Strategy**: Keep previous iteration files for comparison
- **Storage Requirements**: Full population files can exceed 1GB each
- **Compression**: Consider compression for long-term storage
- **Sampling**: Use sampling techniques for large-scale analysis

## Advanced Usage Guidelines

### Post-Processing Workflows

**Trip-based Analysis**:

1. Use individual trip files for detailed routing analysis
2. Apply expansion factors for sampled iterations
3. Aggregate trips to desired geographic/temporal resolution

**Tour-based Analysis**:

1. Use tour files for activity pattern analysis
2. Calculate tour-level statistics (duration, complexity, mode consistency)
3. Analyze tour generation rates by person/household characteristics

**Mode Choice Analysis**:

1. Use probability fields for elasticity analysis
2. Calculate mode-specific accessibility measures
3. Analyze choice model performance via utility functions

**Transit Analysis**:

1. Combine individual and resimulated transit trip files
2. Use TAP-level data for capacity utilization analysis
3. Analyze park-and-ride demand patterns

### Performance Monitoring

**Convergence Indicators**:

- Shadow pricing convergence by zone and segment
- Mode share stability across iterations
- Trip length distribution consistency
- Accessibility measure stability

**Computational Efficiency**:

- Monitor sample rates and processing times
- Track memory usage for large populations
- Optimize file I/O for repeated analysis

## Tour and Trip Modes Codes

| Code | Mode | Description |
|------|------|-------------|
| 1 | DRIVEALONEFREE | Drive alone, non-toll |
| 2 | DRIVEALONEPAY | Drive alone, toll |
| 3 | SHARED2GP | Shared ride 2 person, general purpose lanes (non-toll, non-HOV) |
| 4 | SHARED2HOV | Shared ride 2 person, HOV-eligible (non-toll) |
| 5 | SHARED2PAY | Shared ride 2 person, toll (HOV and toll eligible) |
| 6 | SHARED3GP | Shared ride 3+ person, general purpose lanes (non-toll, non-HOV) |
| 7 | SHARED3HOV | Shared ride 3+ person, HOV-eligible (non-toll) |
| 8 | SHARED3PAY | Shared ride 3+ person, toll (HOV and toll eligible) |
| 9 | WALK | Walk |
| 10 | BIKE | Bicycle |
| 11 | WALK_SET | Walk to transit |
| 12 | PNR_SET | Drive to transit (Park & Ride) |
| 13 | KNR_PERS | Kiss & Ride (personal vehicle drop-off to transit) |
| 14 | KNR_TNC | Kiss & Ride (TNC drop-off to transit) |
| 15 | TAXI | Taxi |
| 16 | TNC | Transportation Network Company (Uber/Lyft) |

## Time Period Codes

| Period | Time Range |
|--------|------------|
| 1 | 03:00 AM to 05:00 AM |
| 2 | 05:00 AM to 05:30 AM |
| 3 | 05:30 AM to 06:00 AM |
| 4 | 06:00 AM to 06:30 AM |
| 5 | 06:30 AM to 07:00 AM |
| 6 | 07:00 AM to 07:30 AM |
| 7 | 07:30 AM to 08:00 AM |
| 8 | 08:00 AM to 08:30 AM |
| 9 | 08:30 AM to 09:00 AM |
| 10 | 09:00 AM to 09:30 AM |
| 11 | 09:30 AM to 10:00 AM |
| 12 | 10:00 AM to 10:30 AM |
| 13 | 10:30 AM to 11:00 AM |
| 14 | 11:00 AM to 11:30 AM |
| 15 | 11:30 AM to 12:00 PM |
| 16 | 12:00 PM to 12:30 PM |
| 17 | 12:30 PM to 01:00 PM |
| 18 | 01:00 PM to 01:30 PM |
| 19 | 01:30 PM to 02:00 PM |
| 20 | 02:00 PM to 02:30 PM |
| 21 | 02:30 PM to 03:00 PM |
| 22 | 03:00 PM to 03:30 PM |
| 23 | 03:30 PM to 04:00 PM |
| 24 | 04:00 PM to 04:30 PM |
| 25 | 04:30 PM to 05:00 PM |
| 26 | 05:00 PM to 05:30 PM |
| 27 | 05:30 PM to 06:00 PM |
| 28 | 06:00 PM to 06:30 PM |
| 29 | 06:30 PM to 07:00 PM |
| 30 | 07:00 PM to 07:30 PM |
| 31 | 07:30 PM to 08:00 PM |
| 32 | 08:00 PM to 08:30 PM |
| 33 | 08:30 PM to 09:00 PM |
| 34 | 09:00 PM to 09:30 PM |
| 35 | 09:30 PM to 10:00 PM |
| 36 | 10:00 PM to 10:30 PM |
| 37 | 10:30 PM to 11:00 PM |
| 38 | 11:00 PM to 11:30 PM |
| 39 | 11:30 PM to 12:00 AM |
| 40 | 12:00 AM to 03:00 AM |

This comprehensive output specification enables detailed analysis of travel behavior patterns, model validation, and policy scenario evaluation using the CT-RAMP modeling framework.
